id: 06_aws_kv
namespace: zoomcamp
description: |
  Set up AWS KV pairs for S3 + Athena (Iceberg) workflows.
  NOTE: You must also set AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY as
  secrets via the Kestra UI (Namespace > KV Store) â€” do NOT put them here.

tasks:
  - id: AWS_ACCOUNT_ID
    type: io.kestra.plugin.core.kv.Set
    key: AWS_ACCOUNT_ID
    kvType: STRING
    value: "080432225258"

  - id: AWS_REGION
    type: io.kestra.plugin.core.kv.Set
    key: AWS_REGION
    kvType: STRING
    value: us-east-1

  - id: S3_BUCKET_NAME
    type: io.kestra.plugin.core.kv.Set
    key: S3_BUCKET_NAME
    kvType: STRING
    value: kestra-sandbox-zoomcamp

  - id: AWS_DATASET
    type: io.kestra.plugin.core.kv.Set
    key: AWS_DATASET
    kvType: STRING
    value: zoomcamp

  - id: ATHENA_OUTPUT_LOCATION
    type: io.kestra.plugin.core.kv.Set
    key: ATHENA_OUTPUT_LOCATION
    kvType: STRING
    value: "s3://kestra-sandbox-zoomcamp/athena-results/"
